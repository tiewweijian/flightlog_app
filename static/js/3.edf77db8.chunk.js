(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[3],{61:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(5);var o=[{path:"/flightlog_app",component:Object(l.lazy)(()=>Promise.resolve().then(t.bind(null,57)))}],c=t(30),s=t(17),u=t(3),i=t(25),m=(t(35),t(36),t(59)),d=t(8),g=t(7);var p=e=>{let{isModalOpen:a,setModalStatus:t}=e;const{token:r,setIsCreateFlightModalOpen:o,setTableData:c}=Object(l.useContext)(d.a),[s,p]=Object(l.useState)(""),[h,E]=Object(l.useState)(""),[f,b]=Object(l.useState)(),[v,x]=Object(l.useState)(),[N,w]=Object(l.useState)(""),O=(e,a)=>((a.getTime()-e.getTime())/36e5).toFixed(1),y=()=>{p(""),E(""),w(""),b(),x()},C=()=>{o(!1)};return n.a.createElement(u.Modal,{isOpen:a,onClose:C,style:{overflow:"visible"}},n.a.createElement(u.ModalHeader,null,"Create Flight Log"),n.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),r)try{const e=await m.a.post(g.g,{tailNumber:s,flightID:h,takeoff:f,landing:v,duration:N},{headers:{"x-auth-token":r,"Content-Type":"application/json"}});console.log("Flight log created:",e.data);try{const e=await m.a.get(g.d,{headers:{"x-auth-token":r}});c(e.data)}catch(a){console.log(a)}C(),y()}catch(a){console.error("Error creating flight log:",a)}else console.log("Not logged in")}},n.a.createElement(u.ModalBody,null,n.a.createElement("div",null,n.a.createElement(u.Label,null,n.a.createElement("span",null,"Tail Number"),n.a.createElement(u.Input,{className:"mt-1",value:s,onChange:e=>p(e.target.value)}))),n.a.createElement("div",null,n.a.createElement(u.Label,null,n.a.createElement("span",null,"Flight ID"),n.a.createElement(u.Input,{className:"mt-1",value:h,onChange:e=>E(e.target.value)}))),n.a.createElement("div",null,n.a.createElement(u.Label,null,n.a.createElement("span",null,"Takeoff"),n.a.createElement(i.a,{value:f,onChange:e=>{if(b(e),v){const a=O(e,v);w(a)}},className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}))),n.a.createElement("div",null,n.a.createElement(u.Label,null,n.a.createElement("span",null,"Landing"),n.a.createElement(i.a,{value:v,onChange:e=>{if(x(e),f){const a=O(f,e);w(a)}},style:{width:"200px",height:"40px"},minDate:f,className:"w-full h-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 overflow:vi"}))),n.a.createElement("div",null,n.a.createElement(u.Label,null,n.a.createElement("span",null,"Duration (hours)"),n.a.createElement(u.Input,{className:"mt-1",value:N,readOnly:!0})))),n.a.createElement(u.ModalFooter,null,n.a.createElement(u.Button,{type:"submit"},"Create Flight Log"))))};var h=function(e){const a=Object(l.useRef)();return Object(l.useEffect)(()=>{function t(t){a.current&&!a.current.contains(t.target)&&e()}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e]),a};var E=function(){const{mode:e,toggleMode:a}=Object(l.useContext)(u.WindmillContext),{toggleSidebar:t}=Object(l.useContext)(c.a),[r,o]=Object(l.useState)(!1),{isCreateFlightModalOpen:i,setIsCreateFlightModalOpen:m,isLoginModalOpen:g,setIsLoginModalOpen:E,token:f,removeToken:b,setSearchText:v}=Object(l.useContext)(d.a),x=h(()=>{r&&o(!1)});function N(){console.log(r),o(!r)}return n.a.createElement("div",null,n.a.createElement(p,{isModalOpen:i,setModalStatus:()=>{m(!1)}}),n.a.createElement("header",{className:"z-40 py-4 bg-white shadow-bottom dark:bg-gray-800"},n.a.createElement("div",{className:"container flex items-center justify-between h-full px-6 mx-auto text-purple-600 dark:text-purple-300"},n.a.createElement("button",{className:"p-1 mr-5 -ml-1 rounded-md lg:hidden focus:outline-none focus:shadow-outline-purple",onClick:t,"aria-label":"Menu"},n.a.createElement(s.MenuIcon,{className:"w-6 h-6","aria-hidden":"true"})),n.a.createElement("div",{className:"flex justify-center flex-1 lg:mr-32"},n.a.createElement("div",{className:"relative w-full max-w-xl mr-6 focus-within:text-purple-500"},n.a.createElement("div",{className:"absolute inset-y-0 flex items-center pl-2"},n.a.createElement(s.SearchIcon,{className:"w-4 h-4","aria-hidden":"true"})),n.a.createElement(u.Input,{className:"pl-8 text-gray-700",placeholder:"Search for projects","aria-label":"Search",onChange:e=>v(e.target.value)}))),n.a.createElement("ul",{className:"flex items-center flex-shrink-0 space-x-6"},n.a.createElement("li",{className:"flex"},n.a.createElement("button",{className:"rounded-md focus:outline-none focus:shadow-outline-purple",onClick:a,"aria-label":"Toggle color mode"},"dark"===e?n.a.createElement(s.SunIcon,{className:"w-5 h-5","aria-hidden":"true"}):n.a.createElement(s.MoonIcon,{className:"w-5 h-5","aria-hidden":"true"}))),n.a.createElement("button",{className:"relative align-middle rounded-md focus:outline-none focus:shadow-outline-purple",onClick:function(){f?(console.log(i),m(!0)):alert("Only logged in users can create flight log data")},"aria-label":"Notifications"},n.a.createElement(s.ModalsIcon,{className:"w-5 h-5","aria-hidden":"true"})),n.a.createElement("li",{className:"relative",ref:x},n.a.createElement("button",{className:"rounded-full focus:shadow-outline-purple focus:outline-none",onClick:N,"aria-label":"Account","aria-haspopup":"true"},n.a.createElement(u.Avatar,{className:"align-middle",src:"https://cdn.icon-icons.com/icons2/2468/PNG/512/user_icon_149329.png",alt:"","aria-hidden":"true"})),n.a.createElement(u.Dropdown,{align:"right",isOpen:r,onClose:()=>N},f?n.a.createElement(u.DropdownItem,{onClick:()=>{alert("Successfully Logged Out"),b(),E(!0)}},n.a.createElement(s.OutlineLogoutIcon,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),n.a.createElement("span",null,"Log Out")):n.a.createElement(u.DropdownItem,{onClick:()=>{o(!1),E(!0)}},n.a.createElement(s.OutlineLogoutIcon,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),n.a.createElement("span",null,"Log In"))))))))};var f=function(e){let{children:a}=e;return n.a.createElement("main",{className:"h-full overflow-y-auto"},n.a.createElement("div",{className:"container grid px-6 mx-auto"},a))},b=t(33);var v=function(){const{setIsCreateFlightModalOpen:e,token:a,isCreateAccountOpen:t,setIsCreateAccountOpen:r}=Object(l.useContext)(d.a);return n.a.createElement("div",{className:"py-4 text-gray-500 dark:text-gray-400"},n.a.createElement("a",{className:"ml-6 text-lg font-bold text-gray-800 dark:text-gray-200",href:"#"},"Flight Logs"),n.a.createElement("div",{className:"px-6 my-6"},n.a.createElement(u.Button,{onClick:()=>{a?e(!0):alert("Only logged in users can create flight log data")}},"Create Flight Log",n.a.createElement("span",{className:"ml-3","aria-hidden":"true"},"+"))),n.a.createElement("div",{className:"px-6 my-6"},n.a.createElement(u.Button,{onClick:()=>{r(!0),console.log(t)}},"Create New Account")))};var x=function(e){return n.a.createElement("aside",{className:"z-30 flex-shrink-0 hidden w-64 overflow-y-auto bg-white dark:bg-gray-800 lg:block"},n.a.createElement(v,null))};const N=Object(l.lazy)(()=>t.e(4).then(t.bind(null,60)));a.default=function(){const{isSidebarOpen:e,closeSidebar:a}=Object(l.useContext)(c.a);let t=Object(r.g)();return Object(l.useEffect)(()=>{a()},[t]),n.a.createElement("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 "+(e&&"overflow-hidden")},n.a.createElement(x,null),n.a.createElement("div",{className:"flex flex-col flex-1 w-full"},n.a.createElement(E,null),n.a.createElement(f,null,n.a.createElement(l.Suspense,{fallback:n.a.createElement(b.a,null)},n.a.createElement(r.d,null,o.map((e,a)=>e.component?n.a.createElement(r.b,{key:a,exact:!0,path:""+e.path,render:a=>n.a.createElement(e.component,a)}):null),n.a.createElement(r.b,{exact:!0,path:"/",render:()=>n.a.createElement(r.a,{to:"/flightlog_app"})}),n.a.createElement(r.b,{component:N}))))))}}}]);
//# sourceMappingURL=3.edf77db8.chunk.js.map